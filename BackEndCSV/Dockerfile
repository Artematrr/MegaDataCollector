FROM openjdk:21-jdk-slim
WORKDIR /app
COPY target/*.jar app.jar

ENV SPRING_SERVLET_MULTIPART_ENABLED=true
ENV SPRING_SERVLET_MULTIPART_MAX_FILE_SIZE=25MB
ENV SPRING_SERVLET_MULTIPART_MAX_REQUEST_SIZE=25MB
ENV SPRING_WEB_RESOURCES_CACHE_CACHECONTROL_MUST_REVALIDATE=true
ENV SPRING_WEB_RESOURCES_CACHE_CACHECONTROL_NO_CACHE=true
ENV SPRING_WEB_RESOURCES_CACHE_CACHECONTROL_NO_STORE=true
ENV UPLOAD_DIR=uploads/

ENTRYPOINT ["java", "-jar", "app.jar"]
